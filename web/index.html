<!doctype html>
<html>
  <head><meta charset="utf-8"/><title>VVP Verifier</title></head>
  <body style="font-family:system-ui; margin:2rem; max-width:900px">
    <h1>VVP Verifier</h1>
    <p>Paste a SIP Identity header or PASSporT JWT and click Verify.</p>
    <label>Identity header</label><br/>
    <textarea id="identity" style="width:100%;height:120px"></textarea><br/><br/>
    <label>PASSporT JWT</label><br/>
    <textarea id="jwt" style="width:100%;height:120px"></textarea><br/><br/>
    <button id="btn">Verify</button>
    <h2>Response</h2>
    <pre id="out" style="background:#f6f6f6;padding:1rem;overflow:auto"></pre>
    <script>
      document.getElementById("btn").addEventListener("click", async () => {
        const identityHeader = document.getElementById("identity").value.trim() || null;
        const passportJwt = document.getElementById("jwt").value.trim() || null;
        const res = await fetch("/verify", {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify({ identityHeader, passportJwt })
        });
        document.getElementById("out").textContent = JSON.stringify(await res.json(), null, 2);
      });
    </script>
  </body>
</html>
